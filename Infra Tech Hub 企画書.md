# Infra Tech Hub 企画書 – TCPレベル判定君

## 1. ミッションとビジョン

ネットワーク・クラウド・セキュリティなど複数分野の実践スキルを測定・理解・向上できるモジュール型クイズプラットフォームを提供し、第一弾として「TCPレベル判定君」をリリースする。

---

## 2. 対象ユーザー

| ペルソナ             | ニーズ               | 例             |
| ---------------- | ----------------- | ------------- |
| ネットワーク基礎学習者      | 構造的な演習と明確なフィードバック | 大学生、CCNA受験者   |
| 現役ネットワークエンジニア    | スキルのギャップ診断と認定     | 企業の運用保守担当     |
| DevOps・クラウドエンジニア | トラブルシュート演習やラボ環境   | AWS/GCP/SRE担当 |
| 採用担当者            | 客観的な技術スクリーニングツール  | SIer、人材採用部門   |

---

## 3. 提供価値

1. **多面的評価** – 理論クイズ、パケット解析、ハンズオンラボを組み合わせて総合的にスキルを測定。
2. **適応型学習パス** – スコアに応じて個別解説やリソースを自動提案。
3. **ゲーミフィケーション** – バッジ獲得、ランキング表示、SNSシェア機能。
4. **シェア可能な認定証** – 合格証PDF生成、LinkedIn連携。

---

## 4. アセスメント設計

### 4.1 TCPレベル判定君のレベル体系

※ 以下はTCPモジュール専用のレベル体系です。他のモジュール（TLS、Azure等）は各モジュールで個別に定義します。

| レベル  | 名称 (TCP比喩)  | 期待スキル             |
| ---- | ----------- | ----------------- |
| Lv.1 | SYN         | 三者ハンドシェイクと基本用語の理解 |
| Lv.2 | ACK         | フロー制御、主要フラグの運用    |
| Lv.3 | ESTABLISHED | 輻輳制御、パケット解析       |
| Lv.4 | FIN/ACK     | 高度トラブルシュート、RFC読解  |

### 4.2 出題形式

- 選択式・シナリオベースクイズ（図表・タイムライン付き）
- インタラクティブPCAPチャレンジ（ブラウザ内Wiresharkビューア）
- ライブサンドボックスラボ（WebSocket端末でLinux VM接続）

### 4.3 スコア計算

- 難易度重み × 正答率 × 回答速度
- 実技課題は自動ユニットテスト＆評価スクリプトで採点

### 4.4 クイズ定義フォーマット

**目的:** フロントエンドを触らずに、新分野のクイズを簡単に追加できる仕組み

| 項目          | 設計内容                             | 理由                 |
| ----------- | -------------------------------- | ------------------ |
| 問題フォーマット    | Markdown + YAML Front-Matter     | Git管理しやすく、1ファイル1問題 |
| 対応形式        | 選択式、真偽式、コード穴埋め、PCAPハイライト         | 柔軟性を保ちながら実装コストを抑制  |
| メディア資産      | 相対パスで画像／PCAPを参照                  | CDN不要、リポジトリ内バンドル可能 |
| タグ付け        | `topic`, `difficulty`, `exam` など | フィルタリングや統計解析に活用    |
| バージョン管理     | Git SHAをメタに記録                    | 差分検証とロールバックが容易     |
| インポートパイプライン | GitHub webhook → CI → データベース     | 手動作業なし、無料枠活用       |

> **新分野追加手順例**
>
> 1. `quizzes/azure/az900/`配下にMarkdownファイルを配置
> 2. `topic: Azure`などタグ付け
> 3. Git pushで自動反映 → UIに即時表示

---

## 5. コア機能

| フェーズ         | MVP (0〜3か月)               | MLP (3〜6か月)        | ビジョン (6〜12か月)        |
| ------------ | ------------------------- | ------------------ | -------------------- |
| ユーザー認証 | ― (ステップ1は匿名のみ) | SSO (SAML, GitHub) | 組織管理、チーム統計 |
| クイズエンジン      | Markdown/YAML問題パック対応      | 適応型エンジン、管理UI追加     | AI生成問題パック・コミュニティ市場   |
| パケットチャレンジ    | 事前PCAPビューア                | 独自PCAPアップロード対応     | エージェントによるリアルタイムキャプチャ |
| ラボ環境 (任意)    | フェーズ2で実装、Docker Composeのみ | シングルVPSトポロジ        | 予算許す限りマルチユーザラボ化      |
| ランキング        | グローバル                     | 組織別                | 季節イベント               |
| サブスクリプション・課金 | 機能オフ                      | Stripeサンドボックス連携    | 複数ゲートウェイ対応（Pay.jp等）  |

---

## 6. 低コスト技術スタック（¥2,000/月以内推奨構成）
月額2,000円以内を確実に達成するため、以下のサービス組み合わせを「推奨構成」として採用します。

| コンポーネント | 採用サービス | 月額(概算) | 補足メモ |
|--------------|-------------|-----------|---------|
| フロントエンド | **Next.js + Vercel Hobby** | ¥0 | Vercel無料枠 (ビルド15分/日・100GB転送) | Next.js: 豊富なドキュメント・Vercel直結 <br>Nuxt.js: Vueエコシステム活用 <br>SvelteKit: 高速・軽量 <br>Astro: コンテンツ中心 | Next.js: 学習コスト低 <br>Nuxt.js: Vue好き向け <br>SvelteKit: エコシステム小規模 <br>Astro: 動的機能はコード分割注意 |
| バックエンドAPI | **FastAPI (Fly.io Launch Plan)** | ¥0 | 無料60クレジット内運用・アイドル時課金なし | FastAPI: 開発速度・タイプ安全性
NestJS: Typescript一貫
Go-Fiber: 高性能・シングルバイナリ | FastAPI: Python依存管理注意
NestJS: 学習コストやDI理解
Go-Fiber: Goスキル必要   |
| データベース | **Supabase Free (PostgreSQL 500MB)** | ¥0 | RLS対応・Auth統合、無料枠制限に注意 | Supabase: RLS/Auth連携可
Neon: Serverless
SQLite: プロトタイプ高速   | Supabase無料枠制限
Neon cold start
SQLite: 同時接続制限      |
| 認証・認可     | NextAuth.js, Clerk, Supabase Auth        | NextAuth.js: 柔軟
Clerk: フル機能
Supabase Auth: BaaS一体 | NextAuth.js: 自前設定多い
Clerk: コスト注意
Supabase: ロックイン      |
| パケットビューア  | tshark/WASM (Pcap.WASM), pcap.js          | WASM: 高互換性
pcap.js: 軽量JS      | WASMビルドサイズ重い
pcap.js: 機能限定      |
| CI/CD        | GitHub Actions, GitLab CI, CircleCI        | GH Actions: 無料枠
GitLab: 自ホスティング可能
CircleCI: 高速      | GH Actions: ワークフロー制限
GitLab: 設定工数      |
| ホスティング     | Vercel, Netlify, Fly.io, Railway, DigitalOcean App Platform | Vercel/Netlify: プレビュー環境即時
Fly.io: グローバル配信
Railway: データベース同時管理 | Vercel無料枠CPU制限
Railway: 無料枠変動   |
| 支払いゲートウェイ | Stripe, Pay.jp, Square                  | Stripe: ドキュメント豊富
Pay.jp: 日本国内強み  | Stripe: 海外向け要検証
Pay.jp: 機能制限      |

---

## 7## 7. 収益モデル
. 収益モデル

1. **フリーミアム** – 基礎レベル無料、高度問題＆ラボは月額¥1,500
2. **法人ライセンス** – 組織向けダッシュボード＋SSO、年額契約
3. **認定証発行料** – 合格証PDF発行¥5,000（再試験割引あり）
4. **スポンサー提供** – ベンダーラボや広告掲載

---

## 8. ロードマップ

| 月数   | 成果物                    | KPI           | コスト上限               |
| ---- | ---------------------- | ------------- | ------------------- |
| M+1  | 要件定義＆無料環境選定            | サインアップ50人     | インフラ月額¥0 (無料枠)      |
| M+2  | MVP公開 (クイズ＋スコア機能)      | アクティブユーザー150人 | ¥2,000/月以下 (DB+VPS) |
| M+4  | コンテンツ拡充＆フィードバック反映      | 継続率25%以上      | 追加コストなし             |
| M+6  | PDF認定＆課金機能開始           | 月商¥30,000     | 収支黒字化               |
| M+9  | 軽量ラボβ (Docker Compose) | 有料登録100人      | VPS1台 (<¥1,500)     |
| M+12 | エンタープライズ検証             | ARR¥1,000,000 | 契約単位で対応             |

---

## 9. リスクと対策

- **ラボ運用の複雑化** → マネージドK8s＋IaC自動再生成
- **コンテンツ更新コスト** → Git管理のMarkDown問題バンク＋外部貢献招待
- **公正性担保** → 問題ランダム化＋Proctoringオプション

---

## 10. 次のアクション

1. 主要競合調査 (Honeypot、HackerRank、TryHackMe)
2. コアメンバー募集 (コンテンツリード、フルスタックエンジニア、DevRel)
3. ペルソナ別ヒアリング実施→MVP機能確定
4. UIモックアップ作成 (Figma)
5. 予算＆スケジュール最終確認

---

## 11. ソロ開発ステップ (バイブコーディング)

1. **準備・環境構築 (Day 1)**

   - リポジトリ初期化、フォルダ構成決定
   - Vercel/Netlifyなどデプロイ連携設定
   - Markdown/YAML問題テンプレート作成

2. **コア機能実装 (Week 1–2)**

   - フロント: 問題一覧・解答画面の雛形作成
   - バック: FastAPIで問題取得・スコア計算API
   - CI設定: GitHub Actionsで自動デプロイ

3. **MVPリリース & フィードバック収集 (Week 3)**

   - TCPレベル判定君の30問を投入しパブリック公開
   - SNSやSlackでユーザー募集→課題抽出

4. **機能拡張 (Week 4–6)**

   - PCAPチャレンジ＋WASMビューア埋込
   - 認証／ランキング機能の追加
   - Azure/TLSモジュール用の問題フォルダ整備

5. **最適化・ドキュメント整備 (Week 7)**

   - コードリファクタリング、コメント追加
   - `README`・開発手順ドキュメント整備
   - Feature Flag／決済スキーマのスケルトン準備

6. **2次リリース & 次期計画 (Week 8+)**

   - 会員制／課金機能をローカルで一通り動作確認
   - Azure練習問題モジュールβ公開
   - 長期ロードマップに沿ったタスク優先度再調整

> 📝 **Tip:** バイブコーディングでは「短いサイクルで動くものを常に出す」ことが鍵。Issue→PR→テスト→デプロイを1日1回回す感覚で進めましょう。

---

---

## 12. 要件定義 草案
本章では、MVP段階における機能要件と非機能要件、およびステップ1のスコープを定義します。

### 12.1 機能要件
1. **匿名クイズ機能**
   - ログインなしでクイズ閲覧・回答可能（Cookie/localStorageに一時スコア保持）
2. **クイズモジュール**
   - クイズ一覧表示（トピック・レベルでフィルタリング）
   - 問題表示・回答（選択式、真偽式）
   - 解答後のスコア算出および結果フィードバック表示
3. **スコアリング／ランキング**
   - 匿名ユーザーは同一セッション内でのスコア確認
   - グローバルランキングはログイン後に利用（ログイン機能はフェーズ2以降）
4. **クイズ定義パイプライン**
   - Markdown＋YAML問題パックの自動インポート（GitHub webhook→CI→DB登録）
5. **CI/CDパイプライン**
   - GitHub Actionsを用いた自動ビルド＆デプロイ

### 12.2 非機能要件
- **可用性**：99% 稼働率（月間ダウンタイム < 8h）
- **応答性能**：ページロード時間 < 2秒
- **セキュリティ**：HTTPS強制
- **運用コスト**：月額¥2,000以下
- **スケーラビリティ**：同時匿名アクセス500セッションを想定

### 12.3 ステップ1（MVP）のスコープ
ステップ1ではログイン・会員管理・課金機能を省略し、匿名ユーザー向けのクイズ体験に特化します。将来的に認証・課金モジュールを追加できるスケルトン設計のみ用意。

#### 12.3.1 実装範囲
1. 匿名クイズ閲覧・回答機能
2. クイズ一覧表示（フィルタ機能）
3. 問題表示・回答（選択式、真偽式）
4. 解答後のスコア算出＆結果フィードバック
5. クイズ定義パイプライン
6. CI/CDパイプライン

#### 12.3.2 非機能範囲
- デプロイ環境：無料枠のVercelまたはFly.io
- HTTPS対応およびパフォーマンス確認（ページロード <2秒）
- 月額運用コスト：¥2,000以下
- 将来拡張のためのAuthService／PaymentGatewayインターフェーススケルトン実装

*Prepared by ChatGPT – 2025年4月20日*

